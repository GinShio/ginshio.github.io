<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title>openSUSE 下 HP 打印机配置 - iris</title><meta name="Description" content="GinShio | configure HP Printer on openSUSE"><meta property="og:title" content="openSUSE 下 HP 打印机配置" />
<meta property="og:description" content="GinShio | configure HP Printer on openSUSE" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.ginshio.org/2022/hp_printer_driver/" /><meta property="og:image" content="https://blog.ginshio.org/avatar.webp"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-27T18:49:18+08:00" />
<meta property="article:modified_time" content="2022-04-08T15:12:13+08:00" /><meta property="og:site_name" content="iris | GinShio的个人博客" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.ginshio.org/avatar.webp"/>

<meta name="twitter:title" content="openSUSE 下 HP 打印机配置"/>
<meta name="twitter:description" content="GinShio | configure HP Printer on openSUSE"/>
<meta name="application-name" content="iris">
<meta name="apple-mobile-web-app-title" content="iris">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.ginshio.org/2022/hp_printer_driver/" /><link rel="prev" href="https://blog.ginshio.org/2022/unixnetworkprogramming_005/" /><link rel="next" href="https://blog.ginshio.org/2022/doom_emacs_configuration/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.1d6e6517c44074bf1c692657d249d106a5e98bb9db25f7773715b24eda7aa575354611c095c23092aa17916f1b5be527.css" integrity="sha384-HW5lF8RAdL8caSZX0knRBqXpi7nbJfd3NxWyTtp6pXU1RhHAlcIwkqoXkW8bW&#43;Un"><link rel="stylesheet" href="/css/style.min.cd14de6b7577483a378a3e7b1d8d4d22e9116704e99988548443184415b6e7ea3d5f86d181e92e8d979297f4dc91299a.css" integrity="sha384-zRTea3V3SDo3ij57HY1NIukRZwTpmYhUhEMYRBW25&#43;o9X4bRgekujZeSl/TckSma"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.2cba216129d7b04299cad0e4a8bb0eb317de61d6e2489778de53950bfcb59fa58d01a258c9e2675ffa3c07c058996f2d.css" integrity="sha384-LLohYSnXsEKZytDkqLsOsxfeYdbiSJd43lOVC/y1n6WNAaJYyeJnX/o8B8BYmW8t">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.2cba216129d7b04299cad0e4a8bb0eb317de61d6e2489778de53950bfcb59fa58d01a258c9e2675ffa3c07c058996f2d.css" integrity="sha384-LLohYSnXsEKZytDkqLsOsxfeYdbiSJd43lOVC/y1n6WNAaJYyeJnX/o8B8BYmW8t"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.1aedca555d87f5dfb2038403a5507b55c3b284994056b717774b61123af82b39df6853cb7b4c50272a2757138d6b8642.css" integrity="sha384-Gu3KVV2H9d&#43;yA4QDpVB7VcOyhJlAVrcXd0thEjr4KznfaFPLe0xQJyonVxONa4ZC">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.1aedca555d87f5dfb2038403a5507b55c3b284994056b717774b61123af82b39df6853cb7b4c50272a2757138d6b8642.css" integrity="sha384-Gu3KVV2H9d&#43;yA4QDpVB7VcOyhJlAVrcXd0thEjr4KznfaFPLe0xQJyonVxONa4ZC"></noscript>
    
    
    
    <meta name="google-site-verification" content="fbzw9fQcZyEFrrrUtxLfzYW-qhZ5TMEZKHHSp9NeLBw" /><meta name="msvalidate.01" content="EC9CEC799D42793C414AE7BDB0D0205C" /><meta name="yandex-verification" content="c0b808dd3e49f730" /><meta name="baidu-site-verification" content="code-RhPhu2ccLc" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "openSUSE 下 HP 打印机配置",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.ginshio.org\/2022\/hp_printer_driver\/"
        },"image": ["https:\/\/blog.ginshio.org\/screenshot.png"],"genre": "posts","keywords": "Driver, Printer, openSUSE, Tool","wordcount":  1755 ,
        "url": "https:\/\/blog.ginshio.org\/2022\/hp_printer_driver\/","datePublished": "2022-02-27T18:49:18+08:00","dateModified": "2022-04-08T15:12:13+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "GinShio","logo": "https:\/\/blog.ginshio.org\/avatar.webp"},"authors": [{
                        "@type": "Person",
                        "name": "GinShio"                    
                    }],"description": "GinShio | configure HP Printer on openSUSE"
    }
    </script></head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark');}
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('light' === 'light' || 'light' === 'dark' || 'light' === 'black') setTheme('light'), saveTheme('light'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="iris"><span class="header-title-pre"><i class="fas fa-terminal"></i></span>iris</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"><i class="fa fa-archive faa-wrench"></i> 归档 </a><a class="menu-item" href="/tags/"><i class="fa fa-tag faa-wrench"></i> 标签 </a><a class="menu-item" href="/categories/"><i class="fa fa-folder-open faa-wrench"></i> 分类 </a><a class="menu-item" href="/series/"><i class="fas fa-object-group"></i> 系列 </a><a class="menu-item" href="/about/"><i class="fa fa-info-circle faa-wrench"></i> 关于 </a><a class="menu-item" href="/links/"><i class="fa fa-user-friends faa-wrench"></i> 友人帐 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="#" onclick="return false;" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" onclick="return false;" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="iris"><span class="header-title-pre"><i class="fas fa-terminal"></i></span>iris</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="#" onclick="return false;" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" onclick="return false;" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" onclick="return false;" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title=""><i class="fa fa-archive faa-wrench"></i>归档</a><a class="menu-item" href="/tags/" title=""><i class="fa fa-tag faa-wrench"></i>标签</a><a class="menu-item" href="/categories/" title=""><i class="fa fa-folder-open faa-wrench"></i>分类</a><a class="menu-item" href="/series/" title=""><i class="fas fa-object-group"></i>系列</a><a class="menu-item" href="/about/" title=""><i class="fa fa-info-circle faa-wrench"></i>关于</a><a class="menu-item" href="/links/" title=""><i class="fa fa-user-friends faa-wrench"></i>友人帐</a><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">目录</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ul>
    <li><a href="#安装驱动">安装驱动</a>
      <ul>
        <li><a href="#自动安装">自动安装</a></li>
        <li><a href="#手动安装">手动安装</a></li>
        <li><a href="#插件安装">插件安装</a></li>
      </ul>
    </li>
    <li><a href="#配置打印机">配置打印机</a>
      <ul>
        <li><a href="#临时连接打印机配置-wifi">临时连接打印机配置 WiFi</a></li>
        <li><a href="#根据-ip-配置无线打印机">根据 IP 配置无线打印机</a></li>
      </ul>
    </li>
    <li><a href="#打印与扫描成果">打印与扫描成果</a></li>
  </ul>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle", "normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">openSUSE 下 HP 打印机配置</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><span class='author'><i class="author fas fa-user-circle fa-fw"></i><span class='screen-reader-text'>  </span><a href='https://blog.ginshio.org/authors/ginshio'>GinShio</a></span>
                </span>&nbsp;<span class="post-category">收录于 </span>&nbsp;<span class="post-category">类别 <a href="/categories/applications/"><i class="far fa-folder fa-fw"></i>Applications</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="02-27">02-27</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="04-08">04-08</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 1755 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#安装驱动">安装驱动</a>
      <ul>
        <li><a href="#自动安装">自动安装</a></li>
        <li><a href="#手动安装">手动安装</a></li>
        <li><a href="#插件安装">插件安装</a></li>
      </ul>
    </li>
    <li><a href="#配置打印机">配置打印机</a>
      <ul>
        <li><a href="#临时连接打印机配置-wifi">临时连接打印机配置 WiFi</a></li>
        <li><a href="#根据-ip-配置无线打印机">根据 IP 配置无线打印机</a></li>
      </ul>
    </li>
    <li><a href="#打印与扫描成果">打印与扫描成果</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><div class="details admonition warning open">
                <div class="details-summary admonition-title">
                    <i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i>
                </div>
                <div class="details-content">
                    <div class="admonition-content">
                        本文最后更新于 <span class="timeago" datetime="2022-04-08T15:12:13" title="April 8, 2022">04-08</span>，文中内容可能已过时。</div>
                </div>
            </div><p>正好家里买了打印机，HP 4800 系列，耗材是真便宜，喷墨是真慢啊。不过正好记录一下
Linux 下的 HP 打印机配置过程。</p>
<p>另外 HP 对开源的态度真不错，估计也是因为自家是开源大厂的缘故吧。</p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>信息<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">本文主要是 openSUSE 配置 HP 打印机的过程</div>
        </div>
    </div>
<h2 id="安装驱动" class="headerLink">
    <a href="#%e5%ae%89%e8%a3%85%e9%a9%b1%e5%8a%a8" class="header-mark"></a>安装驱动</h2><p>Linux 下有 HP 官方的打印机驱动，称为 HPLIP (HP&rsquo;s Linux Imaging and Printing
software)，可以查看 <a href="https://developers.hp.com/hp-linux-imaging-and-printing/features" target="_blank" rel="noopener noreferrer">HPLIP 文档</a> 或者 <a href="https://developers.hp.com/hp-linux-imaging-and-printing/gethplip" target="_blank" rel="noopener noreferrer">下载</a>。</p>
<p>对于 HPLIP 可以在以下 Linux 发行版进行自动安装</p>
<ul>
<li>SUSE Linux (13.2, 42.1, 42.2, 42.3, 15.0, 15.1, 15.2, 15.3)</li>
<li>Fedora (22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)</li>
<li>Linux Mint (18, 18.1, 18.2, 18.3, 19, 19.1, 19.2, 19.3, 20.04, 20.1, 20.2, 20.3)</li>
<li>Red Hat Enterprise Linux (6.0, 7.0, 7.2, 7.6, 7.7, 7.8, 7.9, 8.0, 8.2, 8.3, 8.4, 8.5)</li>
<li>Boss (5.0)</li>
<li>Ubuntu (12.04, 14.04, 15.10, 16.xx, 17.xx, 18.xx, 19.xx, 20.xx, 21.xx)</li>
<li>Debian (7.0 ~ 7.9, 8.0 ~ 8.8, 9.1 ~ 9.9, 10.0 ~ 10.9, 11)</li>
<li>Manjaro Linux (17.1.4, 18.0, 18.0.4, 18.1.0, 18.1.2, 19.0, 20.0, 20.2, 21.0.7)</li>
<li>Zorin (15, 16)</li>
<li>MX Linux (21)</li>
<li>Elementary OS (6, 6.1)</li>
</ul>
<p>比如说 FreeBSD、Gentoo 等发行版，可以采用手动安装。</p>
<p>对 openSUSE 来说，也可以从源中直接安装 hplip</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zypper -y hplip hplip-sane hplip-scan-utils
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="自动安装" class="headerLink">
    <a href="#%e8%87%aa%e5%8a%a8%e5%ae%89%e8%a3%85" class="header-mark"></a>自动安装</h3><p>本节着重讲解官方下载的自动安装方式，选择自己的发行版直接下载就行 (openSUSE 下载
SUSE Linux 即可)，如果没有自己的发行版选择 Others 手动安装。</p>
<p>下载完成后运行 .run 文件 (不需要 root 权限)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./hplip-3.22.2.run
</span></span></code></pre></td></tr></table>
</div>
</div><p>第一个选项即选择自动安装 (a) 还是手动安装 (c)，选择自动即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Please choose the installation mode (a=automatic*, c=custom, q=quit) :
</span></span></code></pre></td></tr></table>
</div>
</div><p>之后确定发行版和输入 root 密码，直接回车允许 hplip 可以安装相关程序即可，当然别忘了同意 (y) hplip 的用户协议。如果想要手动安装可以查看 <a href="https://developers.hp.com/hp-linux-imaging-and-printing/install/manual/index.html" target="_blank" rel="noopener noreferrer">官方文档</a> 来学习，如果想要查看依赖项可以查看 <a href="https://developers.hp.com/hp-linux-imaging-and-printing/install/manual/distros/other" target="_blank" rel="noopener noreferrer">其他发行版的手动安装</a>。</p>
<p>接下来的问题，重启电脑 (r) 后配置还是重新插拔 USB 线材 (p)，当然可以选择忽略 (i)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Restart or re-plug in your printer (r=restart, p=re-plug in*, i=ignore/continue, q=quit)
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后直接回车即可出现配置的图形界面。此时插入打印机 USB 线材即可。</p>
<h3 id="手动安装" class="headerLink">
    <a href="#%e6%89%8b%e5%8a%a8%e5%ae%89%e8%a3%85" class="header-mark"></a>手动安装</h3><p>对于手动安装，第一步即卸载从源中安装的 hplip</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">su -c <span class="s2">&#34;zypper --non-interactive rm hplip hplip-devel hplip-hpijs hplip-sane hplip-scan-utils&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>之后需要的是从源中安装相关依赖</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">su -c <span class="s2">&#34;zypper --non-interactive --no-gpg-checks in --auto-agree-with-licenses \
</span></span></span><span class="line"><span class="cl"><span class="s2">    gcc-c++ glibc ghostscript ghostscript-devel openssl make wget dbus-1-devel \
</span></span></span><span class="line"><span class="cl"><span class="s2">    cups cups-client cups-devel cups-ddk sane sane-backends sane-backends-devel xsane \
</span></span></span><span class="line"><span class="cl"><span class="s2">    python-pip leptonica-devel tesseract-ocr tesseract-ocr-devel tesseract-ocr-traineddata-* libzbar-devel \
</span></span></span><span class="line"><span class="cl"><span class="s2">    python2-Pillow python2-PyYAML python2-PyPDF2 python2-tesserocr python2-decorator python2-scipy python-gobject2 python2-opencv&#34;</span>
</span></span><span class="line"><span class="cl">su -c <span class="s2">&#34;pip2 install --upgrade pip&#34;</span>
</span></span><span class="line"><span class="cl">su -c <span class="s2">&#34;pip2 install setuptools&#34;</span>
</span></span><span class="line"><span class="cl">su -c <span class="s2">&#34;pip2 install reportlab==3.4.0 watchdog==0.10.7&#34;</span>
</span></span><span class="line"><span class="cl">su -c <span class="s2">&#34;pip2 install opencv-contrib-python zbar-py imutils scikit-image pypdfocr&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>依赖安装完成，下载你需要的 <a href="https://sourceforge.net/projects/hplip/" target="_blank" rel="noopener noreferrer">hplip</a> 源码，并对其进行编译安装操作</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">su -c <span class="s2">&#34;./configure --with-hpppddir=/usr/share/cups/model/HP --libdir=/usr/lib64 --prefix=/usr \
</span></span></span><span class="line"><span class="cl"><span class="s2">    --disable-qt4 --enable-qt5 --enable-doc-build \
</span></span></span><span class="line"><span class="cl"><span class="s2">    --disable-cups-ppd-install --disable-foomatic-drv-install --disable-libusb01_build \
</span></span></span><span class="line"><span class="cl"><span class="s2">    --disable-foomatic-ppd-install --disable-hpijs-install --disable-class-driver --disable-udev_sysfs_rules \
</span></span></span><span class="line"><span class="cl"><span class="s2">    --disable-policykit --enable-cups-drv-install --enable-hpcups-install --enable-network-build \
</span></span></span><span class="line"><span class="cl"><span class="s2">    --enable-dbus-build --enable-scan-build --enable-fax-build --enable-apparmor_build&#34;</span>
</span></span><span class="line"><span class="cl">su -c <span class="s2">&#34;make&#34;</span>
</span></span><span class="line"><span class="cl">su -c <span class="s2">&#34;make install&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="插件安装" class="headerLink">
    <a href="#%e6%8f%92%e4%bb%b6%e5%ae%89%e8%a3%85" class="header-mark"></a>插件安装</h3><p>将 HPLIP 安装完毕后，默认是不会安装 plug-in 的，如果有扫描需求，是需要自己安装插件的。否则会在使用 <code>hp-scan</code> 时出现</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error: SANE: Error during device I/O (code=9)
</span></span></code></pre></td></tr></table>
</div>
</div><p>插件安装比较简单，只需要命令行启动</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hp-plugin
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果遇到以下错误</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error: Python gobject/dbus may be not installed\\
</span></span><span class="line"><span class="cl">error: Plug-in install failed.
</span></span></code></pre></td></tr></table>
</div>
</div><p>那就更简单了 (openSUSE 自带了 apparmor)，如果是 debian 需要安装 <code>apparmor-utils</code>
，然后使用命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">su -c <span class="s2">&#34;aa-disable /usr/share/hplip/plugin.py&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>重新安装插件即可</p>
<h2 id="配置打印机" class="headerLink">
    <a href="#%e9%85%8d%e7%bd%ae%e6%89%93%e5%8d%b0%e6%9c%ba" class="header-mark"></a>配置打印机</h2><h3 id="临时连接打印机配置-wifi" class="headerLink">
    <a href="#%e4%b8%b4%e6%97%b6%e8%bf%9e%e6%8e%a5%e6%89%93%e5%8d%b0%e6%9c%ba%e9%85%8d%e7%bd%ae-wifi" class="header-mark"></a>临时连接打印机配置 WiFi</h3><p>如果不需要网络连接打印机进行无线打印，可以选择第一项 USB 连接，这不需要复杂的配置。我的做法是配置好其无线连接，也可以插 USB，方便家庭环境的使用。因此我的选择是第三项 <code>Wireless/802.11</code>。<strong>需要注意的是</strong>如果你已在手机上进行过 WiFi 配置，就无需这一步，请移步下一节。</p>
<figure><img src="/images/hplip-choose-for-connection-method.png" width="50%"/>
</figure>

<p>第二步是选择连接的打印机，不过好像是 py 的原因，从第 2 步到第 3 步很慢，而且在配置无线时有可能出错，出错消息可以在刚刚的安装终端上看到。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Traceback (most recent call last):
</span></span><span class="line"><span class="cl">  File &#34;/usr/share/hplip/ui5/wifisetupdialog.py&#34;, line 713, in NextButton_clicked
</span></span><span class="line"><span class="cl">    self.showNetworkPage()
</span></span><span class="line"><span class="cl">  File &#34;/usr/share/hplip/ui5/wifisetupdialog.py&#34;, line 296, in showNetworkPage
</span></span><span class="line"><span class="cl">    self.performScan()
</span></span><span class="line"><span class="cl">  File &#34;/usr/share/hplip/ui5/wifisetupdialog.py&#34;, line 332, in performScan
</span></span><span class="line"><span class="cl">    self.loadNetworksTable()
</span></span><span class="line"><span class="cl">  File &#34;/usr/share/hplip/ui5/wifisetupdialog.py&#34;, line 422, in loadNetworksTable
</span></span><span class="line"><span class="cl">    i = QTableWidgetItem(str(name))
</span></span><span class="line"><span class="cl">UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\u674e&#39; in position 0: ordinal not in range(128)
</span></span><span class="line"><span class="cl">error: hp-setup failed. Please run hp-setup manually.
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个错误是由于编码问题导致的，需要根据追踪栈，进入文件
<code>/usr/share/hplip/ui5/wifisetupdialog.py</code> 的第 422 行对其 name 进行修改，修改如下即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">i</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改完成后重新使用命令 <code>hp-setup</code> 即可，重复之前的步骤等待进入第三步。第三步是打印机选择需要连接的 WiFi，第四步输入所选 WiFi 的密码。不过无论是前进、后退都相当的慢，尽量一次性输入正确，慢得让我看了一个傅正老师的视频hhhhh。最终配置完成时，会显示如下界面</p>
<figure><img src="/images/hplip-network-information.png" width="50%"/>
</figure>

<h3 id="根据-ip-配置无线打印机" class="headerLink">
    <a href="#%e6%a0%b9%e6%8d%ae-ip-%e9%85%8d%e7%bd%ae%e6%97%a0%e7%ba%bf%e6%89%93%e5%8d%b0%e6%9c%ba" class="header-mark"></a>根据 IP 配置无线打印机</h3><p>上一节已经连接了 WiFi，获取到了无线打印机的 IP。这里就可以断开打印机的 USB 连接，当然如果你想要有线连接的方式控制打印机，也可以不断开连线。</p>
<p>在终端重新启动 hplip 配置，不过这次增加了参数 IP，其实这一步与 hp-setup 界面的第二个选项是一样的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hp-setup 192.168.0.112
</span></span></code></pre></td></tr></table>
</div>
</div><figure><img src="/images/hplip-setup-network.png" width="50%"/>
</figure>

<p>之后就到了如下界面，输入打印机的 name (名称)、description (描述) 以及 location
(位置)，其实只需要填写必要的 name 即可，另外 setup 会自动识别打印机型号并选择对应的驱动文件 (毕竟是 HP 自家驱动)。添加打印机就完成了！！！</p>
<figure><img src="/images/hplip-setup-device.png" width="50%"/>
</figure>

<p>当连接完成之后，打开 HP Device Manager 即可查看打印机详细信息。</p>
<figure><img src="/images/hplip-setup-finish.png" width="50%"/>
</figure>

<h2 id="打印与扫描成果" class="headerLink">
    <a href="#%e6%89%93%e5%8d%b0%e4%b8%8e%e6%89%ab%e6%8f%8f%e6%88%90%e6%9e%9c" class="header-mark"></a>打印与扫描成果</h2><p>尝试了一下配置好的机器，没 A4 纸了，用偏小的纸简单的试一试</p>
<p>打印的是 2021 东京电玩展时，steam 上的图片，打印完成后在通过 hplip 扫描到电脑上，效果如图</p>
<figure><img src="/images/hplip-example-of-print.png" width="64%"/>
</figure>

<p>原图在下面</p>
<figure><img src="/images/tokyo-game-show-2021-online.jpg" width="64%"/>
</figure>

</div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 04-08</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/2022/hp_printer_driver/index.md target="_blank" rel="noopener noreferrer">阅读原始文档</a>
                    </span><span>|&nbsp;<a class="link-to-report" href=https://gitlab.com/GinShio/ginshio.gitlab.io/issues/new?issue[title]=[BUG]%20openSUSE+%E4%B8%8B+HP+%E6%89%93%E5%8D%B0%E6%9C%BA%E9%85%8D%E7%BD%AE&issue[description]=[POST](https://blog.ginshio.org/2022/hp_printer_driver/)%0A%0A##%20Isseus%0A target="_blank" rel="noopener noreferrer">报告问题</a>
                    </span></div>
            <div class="post-info-share">
                <span><a href="#" onclick="return false;" title="分享到 Twitter" data-sharer="twitter" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-title="openSUSE 下 HP 打印机配置" data-hashtags="Driver,Printer,openSUSE,Tool"><i class="fab fa-twitter fa-fw"></i></a><a href="#" onclick="return false;" title="分享到 Facebook" data-sharer="facebook" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-hashtag="Driver"><i class="fab fa-facebook-square fa-fw"></i></a><a href="#" onclick="return false;" title="分享到 Linkedin" data-sharer="linkedin" data-url="https://blog.ginshio.org/2022/hp_printer_driver/"><i class="fab fa-linkedin fa-fw"></i></a><a href="#" onclick="return false;" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-title="openSUSE 下 HP 打印机配置" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="#" onclick="return false;" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-title="openSUSE 下 HP 打印机配置"><i class="fab fa-hacker-news fa-fw"></i></a><a href="#" onclick="return false;" title="分享到 Line" data-sharer="line" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-title="openSUSE 下 HP 打印机配置"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="#" onclick="return false;" title="分享到 Telegram" data-sharer="telegram" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-title="openSUSE 下 HP 打印机配置" data-web><i class="fab fa-telegram-plane fa-fw"></i></a><a href="#" class="weixin" onclick="return false;" title="分享到 微信" data-sharer="weixin" data-url="https://blog.ginshio.org/2022/hp_printer_driver/" data-title="openSUSE 下 HP 打印机配置" data-web><i class="fab fa-weixin fa-fw"></i><img src="https://api.oick.cn/qrcode/api.php?size=256&amp;text=https://blog.ginshio.org/2022/hp_printer_driver/" title="openSUSE 下 HP 打印机配置">
    </a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/driver/">Driver</a>,&nbsp;<a href="/tags/printer/">Printer</a>,&nbsp;<a href="/tags/opensuse/">openSUSE</a>,&nbsp;<a href="/tags/tool/">Tool</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2022/unixnetworkprogramming_005/" class="prev" rel="prev" title="I/O 复用"><i class="fas fa-angle-left fa-fw"></i>I/O 复用</a>
            <a href="/2022/doom_emacs_configuration/" class="next" rel="next" title="Doom Emacs 配置文件">Doom Emacs 配置文件<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.102.3">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.2.13"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://blog.ginshio.org/" target="_blank" rel="noopener noreferrer"> </a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div><script>
                    if('serviceWorker' in navigator) {
                        navigator.serviceWorker
                            .register('/sw.min.js', { scope: '/' })
                            .then(function(registration) {
                            });
                
                        navigator.serviceWorker
                            .ready
                            .then(function(registration) {
                            });
                    }
                </script></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="回到顶部">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div class="assets"><link rel="stylesheet" href="/lib/gitalk/gitalk.min.b250718923eb2b3c2ba2de589fcc7f623ebf3efa17f0e501e7de204156024b108524ffafaf0958fd09d3b68cf0412999.css" integrity="sha384-slBxiSPrKzwrot5Yn8x/Yj6/PvoX8OUB594gQVYCSxCFJP&#43;vrwlY/QnTtozwQSmZ"><link rel="stylesheet" href="/lib/katex/katex.min.bcaaee8fe6b5dd4f321c8900c8680ad49dc0ad32f3ac51816c1734b43a7869dfc4c9ec0449e5c4fc8bfaec08fc80a674.css" integrity="sha384-vKruj&#43;a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.1f5388069d157848068f2228e33a72016ef3233cfb0afc2940343e446a708357e5b391b470f94c0e1c80745c331651ca.css" integrity="sha384-H1OIBp0VeEgGjyIo4zpyAW7zIzz7CvwpQDQ&#43;RGpwg1fls5G0cPlMDhyAdFwzFlHK">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.1f5388069d157848068f2228e33a72016ef3233cfb0afc2940343e446a708357e5b391b470f94c0e1c80745c331651ca.css" integrity="sha384-H1OIBp0VeEgGjyIo4zpyAW7zIzz7CvwpQDQ&#43;RGpwg1fls5G0cPlMDhyAdFwzFlHK"></noscript><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":12},"comment":{"gitalk":{"admin":["GinShio"],"clientID":"96cbbb15f26bebd9141b","clientSecret":"29c7df99d6e1806113996333163a9476027ff1fa","id":"2022-02-27T18:49:18+08:00","owner":"GinShio","repo":"ginshio.github.io","title":"openSUSE 下 HP 打印机配置"}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"ABF13CGNA0","algoliaIndex":"ginshio_blog","algoliaSearchKey":"51cf3425aba132c091b477c3d5e06eea","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"},"sharerjs":true,"table":{"sort":true}};</script><script type="text/javascript" src="/lib/gitalk/gitalk.min.1420a0c0459673bc6824e7ba713f1e0ec1540e86491daf1b6149a7af9cd3f396c86b9182d03e4c727faefae17b746033.js" integrity="sha384-FCCgwEWWc7xoJOe6cT8eDsFUDoZJHa8bYUmnr5zT85bIa5GC0D5Mcn&#43;u&#43;uF7dGAz"></script><script type="text/javascript" src="/js/gitalk.min.js" defer></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.dd4cfdb9c1bcaa687c9794e0620c478af43dec711c465b0560c274a0c20d6023bc183b8817015eb778ab746927905d6e.js" integrity="sha384-3Uz9ucG8qmh8l5TgYgxHivQ97HEcRlsFYMJ0oMINYCO8GDuIFwFet3irdGknkF1u"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.cd363f7498fd08d5e75d97ca1f2510d87d073b35592ba69016728082f8e5e9db33b432643010810a6e88152c4f650059.js" integrity="sha384-zTY/dJj9CNXnXZfKHyUQ2H0HOzVZK6aQFnKAgvjl6dsztDJkMBCBCm6IFSxPZQBZ"></script><script type="text/javascript" src="/lib/tablesort/tablesort.min.d120034e53740430f5243f8e25b646e7bdcca97780e02962c37e3adefb264c1b457f8fc397698851f42e32d7168bdd1e.js" integrity="sha384-0SADTlN0BDD1JD&#43;OJbZG573MqXeA4Cliw3463vsmTBtFf4/Dl2mIUfQuMtcWi90e"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.094758c1816ef1698123c876e7b739ac27751905f428bfb349857a93244d636b615bb42a43298a19f4c2235587c33bf2.js" integrity="sha384-CUdYwYFu8WmBI8h257c5rCd1GQX0KL&#43;zSYV6kyRNY2thW7QqQymKGfTCI1WHwzvy"></script><script type="text/javascript" src="/lib/sharer/sharer.min.0097b33812ac4873e9a2e0813de400c9ea9b07e223998d3cbc38a89bdfa3f45cc344689061a836fcd6f4c120eed429b4.js" integrity="sha384-AJezOBKsSHPpouCBPeQAyeqbB&#43;IjmY08vDiom9&#43;j9FzDRGiQYag2/Nb0wSDu1Cm0"></script><script type="text/javascript" src="/lib/katex/katex.min.3f04544ff62a6e71239193b4cd9c4da9cc400ab5defa3efae94d9a997720320e78e7baef7b663b23a6494a6d80d264b8.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe&#43;j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.f95071777afa5e0511c9caad675d7b9d8c38e0e39c21ac79e99e1d09159bc723edd0aa1a875b87a0ad28e3efd1444d39.js" integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.c30ff9f376878715a4cf90c4567e8e2ad36221a2e2da20513595df251898d408bbb6727d517a44b32bce2135694e5e00.js" integrity="sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.453374f1ad005c88a83c1715a2c12a3d47ca2beacfa7e875c7f8b347bc4c91d332bb091c64259dc4ef914b0205b495cd.js" integrity="sha384-RTN08a0AXIioPBcVosEqPUfKK&#43;rPp&#43;h1x/izR7xMkdMyuwkcZCWdxO&#43;RSwIFtJXN" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-J5NHMZLLDX', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-J5NHMZLLDX" async></script><script>
			var _hmt = _hmt || [];
			(function() {
			  var hm = document.createElement("script");
			  hm.src = "https://hm.baidu.com/hm.js?9370523af547bac6b97e9c3b1461cd16";
			  var s = document.getElementsByTagName("script")[0]; 
			  s.parentNode.insertBefore(hm, s);
			})();
		</script></div>
</body>

</html>