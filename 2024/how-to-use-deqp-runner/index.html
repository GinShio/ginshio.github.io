

<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title>How To Use Mesa&#39;s test tool: deqp-runner - iris</title><meta name="Description" content="GinShio | how to use mesa&#39;s test tool: deqp-runner"><meta property="og:url" content="https://blog.ginshio.org/2024/how-to-use-deqp-runner/">
  <meta property="og:site_name" content="iris">
  <meta property="og:title" content="How To Use Mesa&#39;s test tool: deqp-runner">
  <meta property="og:description" content="GinShio | how to use mesa&#39;s test tool: deqp-runner">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-09-20T23:13:27+08:00">
    <meta property="article:modified_time" content="2024-09-20T23:13:27+08:00">
    <meta property="article:tag" content="HowTo">
    <meta property="og:image" content="https://blog.ginshio.org/avatar.webp">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://blog.ginshio.org/avatar.webp">
  <meta name="twitter:title" content="How To Use Mesa&#39;s test tool: deqp-runner">
  <meta name="twitter:description" content="GinShio | how to use mesa&#39;s test tool: deqp-runner">
<meta name="application-name" content="iris">
<meta name="apple-mobile-web-app-title" content="iris">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" /><link rel="prev" href="https://blog.ginshio.org/2023/how-to-build-mesa/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.1d6e6517c44074bf1c692657d249d106a5e98bb9db25f7773715b24eda7aa575354611c095c23092aa17916f1b5be527.css" integrity="sha384-HW5lF8RAdL8caSZX0knRBqXpi7nbJfd3NxWyTtp6pXU1RhHAlcIwkqoXkW8bW&#43;Un"><link rel="stylesheet" href="/css/color.34e5eb0ed3195c558eb6994b94f6ce01b4d7121bda08365c4f94b70d178301efdb761cb63c963c02c67c45152c3c9498.css" integrity="sha384-NOXrDtMZXFWOtplLlPbOAbTXEhvaCDZcT5S3DReDAe/bdhy2PJY8AsZ8RRUsPJSY"><link rel="stylesheet" href="/css/style.min.71903c93e482438bcb694a21934b32795f3f9dc2c7076dadfa66ca836805f90335eae546d168ddaa1c5de8eda3532d79.css" integrity="sha384-cZA8k&#43;SCQ4vLaUohk0syeV8/ncLHB22t&#43;mbKg2gF&#43;QM16uVG0Wjdqhxd6O2jUy15"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.2cba216129d7b04299cad0e4a8bb0eb317de61d6e2489778de53950bfcb59fa58d01a258c9e2675ffa3c07c058996f2d.css" integrity="sha384-LLohYSnXsEKZytDkqLsOsxfeYdbiSJd43lOVC/y1n6WNAaJYyeJnX/o8B8BYmW8t">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.2cba216129d7b04299cad0e4a8bb0eb317de61d6e2489778de53950bfcb59fa58d01a258c9e2675ffa3c07c058996f2d.css" integrity="sha384-LLohYSnXsEKZytDkqLsOsxfeYdbiSJd43lOVC/y1n6WNAaJYyeJnX/o8B8BYmW8t"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.1aedca555d87f5dfb2038403a5507b55c3b284994056b717774b61123af82b39df6853cb7b4c50272a2757138d6b8642.css" integrity="sha384-Gu3KVV2H9d&#43;yA4QDpVB7VcOyhJlAVrcXd0thEjr4KznfaFPLe0xQJyonVxONa4ZC">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.1aedca555d87f5dfb2038403a5507b55c3b284994056b717774b61123af82b39df6853cb7b4c50272a2757138d6b8642.css" integrity="sha384-Gu3KVV2H9d&#43;yA4QDpVB7VcOyhJlAVrcXd0thEjr4KznfaFPLe0xQJyonVxONa4ZC"></noscript>
    
    
    
    <meta name="google-site-verification" content="fbzw9fQcZyEFrrrUtxLfzYW-qhZ5TMEZKHHSp9NeLBw" /><meta name="msvalidate.01" content="EC9CEC799D42793C414AE7BDB0D0205C" /><meta name="yandex-verification" content="c0b808dd3e49f730" /><meta name="baidu-site-verification" content="code-RhPhu2ccLc" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "How To Use Mesa's test tool: deqp-runner",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.ginshio.org\/2024\/how-to-use-deqp-runner\/"
        },"image": ["https:\/\/blog.ginshio.org\/screenshot.png"],"genre": "posts","keywords": "HowTo","wordcount":  652 ,
        "url": "https:\/\/blog.ginshio.org\/2024\/how-to-use-deqp-runner\/","datePublished": "2024-09-20T23:13:27+08:00","dateModified": "2024-09-20T23:13:27+08:00","publisher": {
            "@type": "Organization",
            "name": "GinShio","logo": "https:\/\/blog.ginshio.org\/avatar.webp"},"authors": [{
                        "@type": "Person",
                        "name": "GinShio"                    
                    }],"description": "GinShio | how to use mesa's test tool: deqp-runner"
    }
    </script><script src="//instant.page/5.1.1" defer type="module" integrity="sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq"></script>
</head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark'); window.theme = theme; }
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('light' === 'light' || 'light' === 'dark' || 'light' === 'black') setTheme('light'), saveTheme('light'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="iris"><span class="header-title-pre"><i class="fas fa-terminal"></i></span>iris</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"><i class="fa fa-archive faa-wrench"></i> 归档 </a><a class="menu-item" href="/tags/"><i class="fa fa-tag faa-wrench"></i> 标签 </a><a class="menu-item" href="/categories/"><i class="fa fa-folder-open faa-wrench"></i> 分类 </a><a class="menu-item" href="/series/"><i class="fas fa-object-group"></i> 系列 </a><a class="menu-item" href="/about/"><i class="fa fa-info-circle faa-wrench"></i> 关于 </a><a class="menu-item" href="/links/"><i class="fa fa-user-friends faa-wrench"></i> 友人帐 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="iris"><span class="header-title-pre"><i class="fas fa-terminal"></i></span>iris</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title=""><i class="fa fa-archive faa-wrench"></i>归档</a><a class="menu-item" href="/tags/" title=""><i class="fa fa-tag faa-wrench"></i>标签</a><a class="menu-item" href="/categories/" title=""><i class="fa fa-folder-open faa-wrench"></i>分类</a><a class="menu-item" href="/series/" title=""><i class="fas fa-object-group"></i>系列</a><a class="menu-item" href="/about/" title=""><i class="fa fa-info-circle faa-wrench"></i>关于</a><a class="menu-item" href="/links/" title=""><i class="fa fa-user-friends faa-wrench"></i>友人帐</a><a href="#" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">目录</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ul>
    <li><a href="#build">Build</a></li>
    <li><a href="#usage-for-deqp">Usage for dEQP</a></li>
    <li><a href="#output">Output</a></li>
    <li><a href="#usage-for-piglit">Usage for piglit</a></li>
  </ul>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">How To Use Mesa&#39;s test tool: deqp-runner</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><span class='author'><i class="author fas fa-user-circle fa-fw"></i><span class='screen-reader-text'>  </span><a href='https://blog.ginshio.org/authors/ginshio'>GinShio</a></span>
                </span>&nbsp;<span class="post-category">收录于 </span>&nbsp;<span class="post-category">类别 <a href="/categories/gpu/"><i class="far fa-folder fa-fw"></i>GPU</a>&nbsp;<a href="/categories/mesa/"><i class="far fa-folder fa-fw"></i>Mesa</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="09-20">09-20</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="09-20">09-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 652 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#build">Build</a></li>
    <li><a href="#usage-for-deqp">Usage for dEQP</a></li>
    <li><a href="#output">Output</a></li>
    <li><a href="#usage-for-piglit">Usage for piglit</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><a href="https://gitlab.freedesktop.org/mesa/deqp-runner" target="_blank" rel="noopener noreferrer">deqp-runner</a> is a series of tools written by mesa developers for running vulkan
and opengl quality test case programs. It can run in parallel and robustly <a href="https://github.com/KhronosGroup/VK-GL-CTS" target="_blank" rel="noopener noreferrer">dEQP</a>
(draw-element quality program), <a href="https://gitlab.freedesktop.org/mesa/piglit" target="_blank" rel="noopener noreferrer">piglit</a>, SkQP (Skia Quality Program), and so on.</p>
<p>In my experience, when running large dEQP test cases, your own changes may cause
umd (user mode driver) to <em>fail</em>, <em>crash</em>, <em>timeout</em>, or <em>hang</em>. If you simply use
<code>deqp-vk</code>, the khronos testcases program for vulkan, the test will stop when umd
throws unrecoverable error. And we cannot easily get the results that new
failures based on the previous version.</p>
<p>Yes, we don&rsquo;t need to write a new / own scripts to handle testcase stopping.
deqp-runner help us to do it:</p>
<ul>
<li>Parallel running cases, it&rsquo;s very useful if we need to run a huge set</li>
<li>Run next case and report this case&rsquo;s state if an unrecoverable error is
thrown</li>
<li>automatically compare the differences between baseline and current version</li>
</ul>
<h2 id="build" class="headerLink">
    <a href="#build" class="header-mark"></a>Build</h2><p>The tool is written in rust-lang, and is very easy to get and build (compare
with C++, <strong>LoL</strong>).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone https://gitlab.freedesktop.org/mesa/deqp-runner.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> deqp-runner
</span></span><span class="line"><span class="cl">cargo build --release --target-dir _build
</span></span></code></pre></td></tr></table>
</div>
</div><p>The executable file is generated in <code>_build/release</code>, <code>deqp-runner</code> and
<code>piglit-runner</code> are very useful for me.</p>
<h2 id="usage-for-deqp" class="headerLink">
    <a href="#usage-for-deqp" class="header-mark"></a>Usage for dEQP</h2><p>We run dEQP cases via <code>deqp-runner</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">deqp-runner run \
</span></span><span class="line"><span class="cl">    [runner options...] \
</span></span><span class="line"><span class="cl">    -- \
</span></span><span class="line"><span class="cl">    [deqp program options...]
</span></span></code></pre></td></tr></table>
</div>
</div><p>For running dEQP testcases, we have some important arguments in <code>deqp-runner</code>:</p>
<dl>
<dt>deqp</dt>
<dd>dEQP executable file</dd>
<dt>jobs</dt>
<dd>how many threads running in parallel</dd>
<dt>output</dt>
<dd>where the results are stored</dd>
<dt>timeout</dt>
<dd>the run is terminted if the given number of seconds is exceeded</dd>
<dt>caselist</dt>
<dd>a list of testcase list files</dd>
<dt>env</dt>
<dd>a list of test run-time environment variables, e.g. <code>VK_DRIVER_FILES</code>,
<code>MESA_LOADER_DRIVER_OVERRIDE</code></dd>
</dl>
<p>If you run a base driver first, you can set <strong>baseline</strong> to failures of base,
<code>deqp-runner</code> will automatically compare current results with baseline.</p>
<p>If you just want to run a subset of given case lists, <strong>include-tests</strong> help us to
do it, testcases are skipped if testcase name is not match in this option.</p>
<p>For example, I use command a lot:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">deqp-runner run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp deqp-vk <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --caselist <span class="o">{</span>binding-mode,descriptor-indexing<span class="o">}</span>.txt compute.txt image/*.txt <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --env <span class="nv">VK_DRIVER_FILES</span><span class="o">=</span>vulkan/icd.d/radeon_icd.x86_64.json <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --jobs <span class="k">$(</span>awk -v <span class="nv">CPUS</span><span class="o">=</span><span class="k">$(</span>lscpu -e <span class="p">|</span>wc -l<span class="k">)</span> <span class="s1">&#39;BEGIN{print int((CPUS-1)*0.8)}&#39;</span><span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --output deqp-vk_<span class="k">$(</span>date --iso-8601<span class="o">=</span><span class="s2">&#34;date&#34;</span><span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --timeout 240.0 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -- <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-log-images<span class="o">=</span>disable <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-log-shader-sources<span class="o">=</span>disable <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-log-decompiled-spirv<span class="o">=</span>disable <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-shadercache<span class="o">=</span>disable
</span></span></code></pre></td></tr></table>
</div>
</div><p>Running opengl dEQP is similar to vulkan:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">deqp-runner run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp glcts <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --caselist gl/khronos_mustpass/*-main.txt <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --env <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>opengl <span class="nv">MESA_LOADER_DRIVER_OVERRIDE</span><span class="o">=</span>radeonsi <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --jobs <span class="m">4</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --output deqp-gl_<span class="k">$(</span>date --iso-8601<span class="o">=</span><span class="s2">&#34;date&#34;</span><span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --timeout 240.0 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -- <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-gl-config-name<span class="o">=</span>rgba8888d24s8ms0 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-surface-<span class="o">{</span>height,width<span class="o">}=</span><span class="m">256</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --deqp-visibility<span class="o">=</span>hidden
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="output" class="headerLink">
    <a href="#output" class="header-mark"></a>Output</h2><p>The main output files we should focus on:</p>
<ul>
<li><strong>results.csv</strong> that all testcases status in here</li>
<li><strong>failures.csv</strong> that all failures, crashes, timeouts in here</li>
</ul>
<p>According to source code, the test status as following:</p>
<table>
<thead>
<tr>
<th>test status</th>
<th>runner status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pass</td>
<td>Pass</td>
</tr>
<tr>
<td>Fail</td>
<td>Fail</td>
</tr>
<tr>
<td>QualityWarning</td>
<td>Warn</td>
</tr>
<tr>
<td>CompatibilityWarning</td>
<td>Warn</td>
</tr>
<tr>
<td>Pending</td>
<td>Fail</td>
</tr>
<tr>
<td>NotSupported</td>
<td>Skip</td>
</tr>
<tr>
<td>ResourceError</td>
<td>Fail</td>
</tr>
<tr>
<td>InternalError</td>
<td>Fail</td>
</tr>
<tr>
<td>Crash</td>
<td>Crash</td>
</tr>
<tr>
<td>DeviceLost</td>
<td>Crash</td>
</tr>
<tr>
<td>Timeout</td>
<td>Timeout</td>
</tr>
<tr>
<td>Waiver</td>
<td>Warn</td>
</tr>
<tr>
<td>Not found testcase</td>
<td>Missing</td>
</tr>
</tbody>
</table>
<p>If using baseline, maybe get new status:</p>
<table>
<thead>
<tr>
<th>runner status</th>
<th>means</th>
</tr>
</thead>
<tbody>
<tr>
<td>ExpectedFail</td>
<td>Failed in baseline and current</td>
</tr>
<tr>
<td>UnexpectedImprovement</td>
<td>Status in current better than baseline</td>
</tr>
</tbody>
</table>
<p>If any results came back with an unexpected failure, run the caselist again to
see if we get the same results, and mark any changing results as flaky tests. In
results file, it called <strong>Flake</strong>.</p>
<p>Easily report the flake testcases in current running:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">awk -F, <span class="s1">&#39;$2 == &#34;Flake&#34;{print $1}&#39;</span> results.csv &gt;flakes.txt
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="usage-for-piglit" class="headerLink">
    <a href="#usage-for-piglit" class="header-mark"></a>Usage for piglit</h2><p>Similar to <code>deqp-runner</code>, piglit must set profile mode what is <code>*.xml.gz</code> in tests
folder. And using <strong>piglit-folder</strong> instead of <em>deqp</em> executable file.</p>
<p>For example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">piglit-runner run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --jobs <span class="m">2</span> --profile quick --timeout <span class="m">300</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --piglit-folder piglit <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --output piglit_<span class="k">$(</span>date --iso-8601<span class="o">=</span><span class="s2">&#34;date&#34;</span><span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --
</span></span></code></pre></td></tr></table>
</div>
</div><p>Different with other runner, testcase&rsquo;s name looks strange in result file. For
example, <code>asmparsertest@arbfp1.0@cos-03.txt</code>. In fact, the name is from profile.</p>
</div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 09-20</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/2024/how-to-use-deqp-runner/index.md target="_blank" rel="noopener noreferrer">阅读原始文档</a>
                    </span><span>|&nbsp;<a class="link-to-report" href=https://gitlab.com/GinShio/ginshio.gitlab.io/issues/new?issue[title]=[BUG]%20How+To+Use+Mesa%27s+test+tool%3A+deqp-runner&issue[description]=[POST](https://blog.ginshio.org/2024/how-to-use-deqp-runner/)%0A%0A##%20Isseus%0A target="_blank" rel="noopener noreferrer">报告问题</a>
                    </span></div>
            <div class="post-info-share">
                <span><a href="#" title="分享到 Twitter" data-sharer="twitter" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-title="How To Use Mesa&#39;s test tool: deqp-runner" data-hashtags="HowTo"><i class="fab fa-twitter fa-fw"></i></a><a href="#" title="分享到 Facebook" data-sharer="facebook" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-hashtag="HowTo"><i class="fab fa-facebook-square fa-fw"></i></a><a href="#" title="分享到 Linkedin" data-sharer="linkedin" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/"><i class="fab fa-linkedin fa-fw"></i></a><a href="#" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-title="How To Use Mesa&#39;s test tool: deqp-runner" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="#" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-title="How To Use Mesa&#39;s test tool: deqp-runner"><i class="fab fa-hacker-news fa-fw"></i></a><a href="#" title="分享到 Line" data-sharer="line" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-title="How To Use Mesa&#39;s test tool: deqp-runner"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="#" title="分享到 Telegram" data-sharer="telegram" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-title="How To Use Mesa&#39;s test tool: deqp-runner" data-web><i class="fab fa-telegram-plane fa-fw"></i></a><a href="#" class="weixin" title="分享到 微信" data-sharer="weixin" data-url="https://blog.ginshio.org/2024/how-to-use-deqp-runner/" data-title="How To Use Mesa&#39;s test tool: deqp-runner" data-web><i class="fab fa-weixin fa-fw"></i><img src="https://api.oick.cn/qrcode/api.php?size=256&amp;text=https://blog.ginshio.org/2024/how-to-use-deqp-runner/" title="How To Use Mesa&#39;s test tool: deqp-runner">
    </a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/howto/">HowTo</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2023/how-to-build-mesa/" class="prev" rel="prev" title="How To Build Mesa for AMD"><i class="fas fa-angle-left fa-fw"></i>How To Build Mesa for AMD</a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.131.0">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.3.0"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://blog.ginshio.org/" target="_blank" rel="noopener noreferrer">GinShio</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div><script>
                    if('serviceWorker' in navigator) {
                        navigator.serviceWorker
                            .register('/sw.min.js', { scope: '/' })
                            .then(function(registration) {
                            });
                
                        navigator.serviceWorker
                            .ready
                            .then(function(registration) {
                            });
                    }
                </script></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="回到顶部">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div class="assets"><link rel="stylesheet" href="/lib/gitalk/gitalk.min.b82a526943533d0dde3eceea68e6d3879e8f766339a17d2c57bbde5421167ddeafa4734202e9950c16842cc6d27753b4.css" integrity="sha384-uCpSaUNTPQ3ePs7qaObTh56PdmM5oX0sV7veVCEWfd6vpHNCAumVDBaELMbSd1O0"><link rel="stylesheet" href="/lib/katex/katex.min.bcaaee8fe6b5dd4f321c8900c8680ad49dc0ad32f3ac51816c1734b43a7869dfc4c9ec0449e5c4fc8bfaec08fc80a674.css" integrity="sha384-vKruj&#43;a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.1f5388069d157848068f2228e33a72016ef3233cfb0afc2940343e446a708357e5b391b470f94c0e1c80745c331651ca.css" integrity="sha384-H1OIBp0VeEgGjyIo4zpyAW7zIzz7CvwpQDQ&#43;RGpwg1fls5G0cPlMDhyAdFwzFlHK">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.1f5388069d157848068f2228e33a72016ef3233cfb0afc2940343e446a708357e5b391b470f94c0e1c80745c331651ca.css" integrity="sha384-H1OIBp0VeEgGjyIo4zpyAW7zIzz7CvwpQDQ&#43;RGpwg1fls5G0cPlMDhyAdFwzFlHK"></noscript><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":12},"comment":{"gitalk":{"admin":["GinShio"],"clientID":"96cbbb15f26bebd9141b","clientSecret":"29c7df99d6e1806113996333163a9476027ff1fa","id":"2024-09-20T23:13:27+08:00","owner":"GinShio","repo":"ginshio.github.io","title":"How To Use Mesa's test tool: deqp-runner"}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"ABF13CGNA0","algoliaIndex":"ginshio_blog","algoliaSearchKey":"51cf3425aba132c091b477c3d5e06eea","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"},"sharerjs":true,"table":{"sort":true}};</script><script type="text/javascript" src="/lib/gitalk/gitalk.min.1420a0c0459673bc6824e7ba713f1e0ec1540e86491daf1b6149a7af9cd3f396c86b9182d03e4c727faefae17b746033.js" integrity="sha384-FCCgwEWWc7xoJOe6cT8eDsFUDoZJHa8bYUmnr5zT85bIa5GC0D5Mcn&#43;u&#43;uF7dGAz"></script><script type="text/javascript" src="/js/gitalk.min.js" defer></script><script type="text/javascript" src="/lib/tablesort/tablesort.min.d120034e53740430f5243f8e25b646e7bdcca97780e02962c37e3adefb264c1b457f8fc397698851f42e32d7168bdd1e.js" integrity="sha384-0SADTlN0BDD1JD&#43;OJbZG573MqXeA4Cliw3463vsmTBtFf4/Dl2mIUfQuMtcWi90e"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.094758c1816ef1698123c876e7b739ac27751905f428bfb349857a93244d636b615bb42a43298a19f4c2235587c33bf2.js" integrity="sha384-CUdYwYFu8WmBI8h257c5rCd1GQX0KL&#43;zSYV6kyRNY2thW7QqQymKGfTCI1WHwzvy"></script><script type="text/javascript" src="/lib/sharer/sharer.min.0097b33812ac4873e9a2e0813de400c9ea9b07e223998d3cbc38a89bdfa3f45cc344689061a836fcd6f4c120eed429b4.js" integrity="sha384-AJezOBKsSHPpouCBPeQAyeqbB&#43;IjmY08vDiom9&#43;j9FzDRGiQYag2/Nb0wSDu1Cm0"></script><script type="text/javascript" src="/lib/katex/katex.min.3f04544ff62a6e71239193b4cd9c4da9cc400ab5defa3efae94d9a997720320e78e7baef7b663b23a6494a6d80d264b8.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe&#43;j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.f95071777afa5e0511c9caad675d7b9d8c38e0e39c21ac79e99e1d09159bc723edd0aa1a875b87a0ad28e3efd1444d39.js" integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.c30ff9f376878715a4cf90c4567e8e2ad36221a2e2da20513595df251898d408bbb6727d517a44b32bce2135694e5e00.js" integrity="sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.453374f1ad005c88a83c1715a2c12a3d47ca2beacfa7e875c7f8b347bc4c91d332bb091c64259dc4ef914b0205b495cd.js" integrity="sha384-RTN08a0AXIioPBcVosEqPUfKK&#43;rPp&#43;h1x/izR7xMkdMyuwkcZCWdxO&#43;RSwIFtJXN" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-J5NHMZLLDX', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-J5NHMZLLDX" async></script><script>
			var _hmt = _hmt || [];
			(function() {
			  var hm = document.createElement("script");
			  hm.src = "https://hm.baidu.com/hm.js?9370523af547bac6b97e9c3b1461cd16";
			  var s = document.getElementsByTagName("script")[0]; 
			  s.parentNode.insertBefore(hm, s);
			})();
		</script></div>
</body>

</html>